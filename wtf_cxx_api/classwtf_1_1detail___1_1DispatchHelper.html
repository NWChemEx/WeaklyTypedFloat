<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>wtf: wtf::detail_::DispatchHelper&lt; VariantTuple &gt; Class Template Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">wtf<span id="projectnumber">&#160;1.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacewtf.html">wtf</a></li><li class="navelem"><b>detail_</b></li><li class="navelem"><a class="el" href="classwtf_1_1detail___1_1DispatchHelper.html">DispatchHelper</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classwtf_1_1detail___1_1DispatchHelper-members.html">List of all members</a>  </div>
  <div class="headertitle"><div class="title">wtf::detail_::DispatchHelper&lt; VariantTuple &gt; Class Template Reference</div></div>
</div><!--header-->
<div class="contents">

<p>Tracks the unwrapped variants as we resolve them.  
 <a href="classwtf_1_1detail___1_1DispatchHelper.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="dispatcher_8hpp_source.html">dispatcher.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pub-methods" name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:acc52e274b7168457996248a6ebfbcbba" id="r_acc52e274b7168457996248a6ebfbcbba"><td class="memTemplParams" colspan="2">template&lt;typename VariantTuple2 &gt; <br />
requires std::is_convertible_v&lt;VariantTuple2, VariantTuple&gt;</td></tr>
<tr class="memitem:acc52e274b7168457996248a6ebfbcbba"><td class="memTemplItemLeft" align="right" valign="top">&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classwtf_1_1detail___1_1DispatchHelper.html#acc52e274b7168457996248a6ebfbcbba">DispatchHelper</a> (VariantTuple2 &amp;&amp;variants)</td></tr>
<tr class="memdesc:acc52e274b7168457996248a6ebfbcbba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates an instance capable of visiting <code>variants</code>.  <br /></td></tr>
<tr class="separator:acc52e274b7168457996248a6ebfbcbba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18442246cea3a344adfe102657b6fc93" id="r_a18442246cea3a344adfe102657b6fc93"><td class="memTemplParams" colspan="2">template&lt;typename VariantType &gt; </td></tr>
<tr class="memitem:a18442246cea3a344adfe102657b6fc93"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classwtf_1_1detail___1_1DispatchHelper.html#a18442246cea3a344adfe102657b6fc93">add_variant</a> (VariantType &amp;&amp;variant)</td></tr>
<tr class="memdesc:a18442246cea3a344adfe102657b6fc93"><td class="mdescLeft">&#160;</td><td class="mdescRight">Creates a new <a class="el" href="classwtf_1_1detail___1_1DispatchHelper.html" title="Tracks the unwrapped variants as we resolve them.">DispatchHelper</a> holding the variants in *this plus <code>variant</code>.  <br /></td></tr>
<tr class="separator:a18442246cea3a344adfe102657b6fc93"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade8f10357f05c0b8cb76fd97ea9ae90e" id="r_ade8f10357f05c0b8cb76fd97ea9ae90e"><td class="memTemplParams" colspan="2">template&lt;typename FxnType &gt; </td></tr>
<tr class="memitem:ade8f10357f05c0b8cb76fd97ea9ae90e"><td class="memTemplItemLeft" align="right" valign="top">auto&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="classwtf_1_1detail___1_1DispatchHelper.html#ade8f10357f05c0b8cb76fd97ea9ae90e">run</a> (FxnType &amp;&amp;fxn)</td></tr>
<tr class="memdesc:ade8f10357f05c0b8cb76fd97ea9ae90e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initiates the dispatch.  <br /></td></tr>
<tr class="separator:ade8f10357f05c0b8cb76fd97ea9ae90e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><div class="compoundTemplParams">template&lt;typename VariantTuple&gt;<br />
class wtf::detail_::DispatchHelper&lt; VariantTuple &gt;</div><p>Tracks the unwrapped variants as we resolve them. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">VariantTuple</td><td>A std::tuple of std::variant types. Each variant holds pointers to type-restored models.</td></tr>
  </table>
  </dd>
</dl>
<p>As dispatch recurses it will downcast holders to models. The downcasted Models are then stored in a tuple as they are found. This class wraps the process of "expanding" the tuple of variants and when the time comes to run the callable this class is capable of invoking the callable with the Models.</p>
<p>This class is used by:</p><ol type="1">
<li>Create the first instance once the first Model is found.</li>
<li>Call add_variant to get the second instance once the second Model is found.</li>
<li>Repeat step 2 until all Models are found.</li>
<li>Call <code>run</code> with the user-provided callable. <code>run</code> will return the result of the user's callable. </li>
</ol>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="acc52e274b7168457996248a6ebfbcbba" name="acc52e274b7168457996248a6ebfbcbba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acc52e274b7168457996248a6ebfbcbba">&#9670;&#160;</a></span>DispatchHelper()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename VariantTuple &gt; </div>
<div class="memtemplate">
template&lt;typename VariantTuple2 &gt; <br />
requires std::is_convertible_v&lt;VariantTuple2, VariantTuple&gt;</div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classwtf_1_1detail___1_1DispatchHelper.html">wtf::detail_::DispatchHelper</a>&lt; VariantTuple &gt;::DispatchHelper </td>
          <td>(</td>
          <td class="paramtype">VariantTuple2 &amp;&amp;&#160;</td>
          <td class="paramname"><em>variants</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">explicit</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates an instance capable of visiting <code>variants</code>. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">VariantTuple2</td><td>The type of the tuple of variants to visit. VariantTuple2 must be implicitly convertible to VariantTuple.</td></tr>
  </table>
  </dd>
</dl>
<p>This ctor perfectly forwards <code>variants</code> into the member variable.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">variants</td><td>The tuple of variants to visit.</td></tr>
  </table>
  </dd>
</dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">???</td><td>Any exception thrown by the copy or move constructor of <code>variants</code>. Same throw guarantee as the copy or move ctor of <code>variants</code>. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a18442246cea3a344adfe102657b6fc93" name="a18442246cea3a344adfe102657b6fc93"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18442246cea3a344adfe102657b6fc93">&#9670;&#160;</a></span>add_variant()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename VariantTuple &gt; </div>
<div class="memtemplate">
template&lt;typename VariantType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto <a class="el" href="classwtf_1_1detail___1_1DispatchHelper.html">wtf::detail_::DispatchHelper</a>&lt; VariantTuple &gt;::add_variant </td>
          <td>(</td>
          <td class="paramtype">VariantType &amp;&amp;&#160;</td>
          <td class="paramname"><em>variant</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Creates a new <a class="el" href="classwtf_1_1detail___1_1DispatchHelper.html" title="Tracks the unwrapped variants as we resolve them.">DispatchHelper</a> holding the variants in *this plus <code>variant</code>. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">VariantType</td><td>The type of the variant to add to the tuple.</td></tr>
  </table>
  </dd>
</dl>
<p>This method is called when we have worked out the type of a new model. Once we have the new model we need to create a new <a class="el" href="classwtf_1_1detail___1_1DispatchHelper.html" title="Tracks the unwrapped variants as we resolve them.">DispatchHelper</a> that contains the models in *this plus the new model. This method wraps that process. The new variant is appended to tuple of variants stored in *this.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">variant</td><td>The new variant to add to the tuple.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A new <a class="el" href="classwtf_1_1detail___1_1DispatchHelper.html" title="Tracks the unwrapped variants as we resolve them.">DispatchHelper</a> instance holding the variants in *this plus <code>variant</code>.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">???</td><td>Any exception thrown by the copy or move constructor of the variants. Same throw guarantee as the copy or move ctor of the variants. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ade8f10357f05c0b8cb76fd97ea9ae90e" name="ade8f10357f05c0b8cb76fd97ea9ae90e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade8f10357f05c0b8cb76fd97ea9ae90e">&#9670;&#160;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;typename VariantTuple &gt; </div>
<div class="memtemplate">
template&lt;typename FxnType &gt; </div>
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">auto <a class="el" href="classwtf_1_1detail___1_1DispatchHelper.html">wtf::detail_::DispatchHelper</a>&lt; VariantTuple &gt;::run </td>
          <td>(</td>
          <td class="paramtype">FxnType &amp;&amp;&#160;</td>
          <td class="paramname"><em>fxn</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Initiates the dispatch. </p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">FxnType</td><td>The type of the callable to invoke.</td></tr>
  </table>
  </dd>
</dl>
<p>This method expands the tuple of variants stored in *this and calls the user-provided callable with the models stored in the variants. The user-provided callable must have an API so that it can be called with any combination of the models stored in the variants, else this will fail to compile.</p>
<p>The signature of each overload should be something like: <code>R(const Model&lt;Type1&gt;&amp;, Model&lt;Type2&gt;&amp;, ...)</code> where <code>R</code> is the type returned from the callable and <code>Type1</code>, <code>Type2</code>, ... are the types each Model wraps. Note that models are taken by reference and can be const or non-const as long as the holders are mutable. If a holder is const, the corresponding model must be const as well.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">fxn</td><td>The callable to invoke.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The return value returned by the callable.</dd></dl>
<dl class="exception"><dt>Exceptions</dt><dd>
  <table class="exception">
    <tr><td class="paramname">???</td><td>Any exception thrown by the callable. Same throw guarantee as the callable. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>include/wtf/detail_/<a class="el" href="dispatcher_8hpp_source.html">dispatcher.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
