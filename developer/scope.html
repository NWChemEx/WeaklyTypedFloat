

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>What is the Scope of WTF? &mdash; WeaklyTypedFloats 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=8d563738"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Type-Erasure in WTF" href="type_erasure.html" />
    <link rel="prev" title="Why do we need WTF?" href="statement_of_need.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html">
            
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Developer Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="statement_of_need.html">Why do we need WTF?</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">What is the Scope of WTF?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#needed-concepts-abstractions">Needed Concepts/Abstractions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fundamental-operations">Fundamental Operations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#conversions">Conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#maybe-we-support">Maybe We Support</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="type_erasure.html">Type-Erasure in WTF</a></li>
<li class="toctree-l2"><a class="reference internal" href="operations.html">Performing Type-Safe Operations</a></li>
<li class="toctree-l2"><a class="reference internal" href="architecture.html">Architecture of WTF</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../adding_a_new_type.html">Registering a New Type with WTF</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">APIs:</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://nwchemex.github.io/WeaklyTypedFloat/wtf_cxx_api/index.html">C++ API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">WeaklyTypedFloats</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Developer Documentation</a></li>
      <li class="breadcrumb-item active">What is the Scope of WTF?</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/developer/scope.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="what-is-the-scope-of-wtf">
<h1>What is the Scope of WTF?<a class="headerlink" href="#what-is-the-scope-of-wtf" title="Link to this heading"></a></h1>
<p>The goal of WTF is to provide a set of abstractions that enable users to
write APIs that work with arbitrary floating point types without having to
rely on templates. At the same time, we also realize that floating-point types
are often used in numerical algorithms where they are often subjected to
linear algebra operations. WTF does NOT want to implement linear algebra! It is
thus crucial that we decide where the line between linear algebra and WTF is.</p>
<section id="needed-concepts-abstractions">
<h2>Needed Concepts/Abstractions<a class="headerlink" href="#needed-concepts-abstractions" title="Link to this heading"></a></h2>
<p>WTF will need to minimally provide the user with a class representing a type-
erased FP value. In practice users will rarely want to work with a single value
so we will also need to provide a way to work with collections of these values,
of particular note is that users will want to work with collections of these
values that are stored in contiguous memory. To provide an object-oriented API,
it must be possible for the user to grab an element from the collection in a
way that the element is assignable, but still stored in the full collection
(e.g., think of it as a reference or view of the element). Similarly, it must
be possible to grab a sub-collection of the full collection in a way that the
sub-collection is assignable, but still stored in the full collection. The
latter also enables the user to interface already allocated memory with WTF.</p>
<p>In summary:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">wtf::Float</span></code> class that holds a type-erased floating point value. Owns the
underlying value.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wtf::FloatBuffer</span></code> class that acts like it holds a series of <code class="docutils literal notranslate"><span class="pre">wtf::Float</span></code>
objects, but actually unwraps the underlying type into contiguous memory. Owns
the underlying memory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wtf::FloatView</span></code> class that acts like it is aliasing a <code class="docutils literal notranslate"><span class="pre">wtf::Float</span></code>
object, but actually wraps a pointer to the raw memory.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">wtf::FloatBufferView</span></code> class that acts like an alias to a
<code class="docutils literal notranslate"><span class="pre">wtf::FloatBuffer</span></code> object, but actually wraps pointer(s) to the contiguous
memory.</p></li>
</ul>
<p>In practice, we will also need <code class="docutils literal notranslate"><span class="pre">const</span></code> versions of the view classes (views
end up working like iterators).</p>
</section>
<section id="fundamental-operations">
<h2>Fundamental Operations<a class="headerlink" href="#fundamental-operations" title="Link to this heading"></a></h2>
<p>Under typical circumstances all C++ objects should provide:</p>
<ul class="simple">
<li><p>Default constructors.</p></li>
<li><p>Copy and move constructors.
- Deep copy for objects that own memory. Shallow for those that alias.</p></li>
<li><p>Copy and move assignment operators.
- Deep copy for objects that own memory. Shallow for those that alias.</p></li>
<li><p>Equality/Inequality operators.</p>
<ul>
<li><p>Exact equality. Good for testing that state is set correctly. Not used for
checking results of numerical calculations (vide infra).</p></li>
</ul>
</li>
</ul>
<p>Since these will be numerical types it will also be nice if our objects
provided:</p>
<ul class="simple">
<li><p>Operations to establish order (e.g., <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, etc…).</p></li>
<li><p>The ability to determine approximate equality.
- User should be able to control relative and absolute tolerances.</p></li>
<li><p>A way to print the value to a stream (e.g., <code class="docutils literal notranslate"><span class="pre">operator&lt;&lt;</span></code>).</p></li>
</ul>
</section>
<section id="conversions">
<h2>Conversions<a class="headerlink" href="#conversions" title="Link to this heading"></a></h2>
<p>To support the above we must be able to convert between types. Depending on the
circumstance we may not always want the same conversion. For example, if we
are afraid of loosing precision we will want all conversions to use the most
precise type. On the other hand, if we are optimizing for speed we may want
all conversions to use the least precise type.</p>
</section>
<section id="maybe-we-support">
<h2>Maybe We Support<a class="headerlink" href="#maybe-we-support" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Element-wise arithmetic operations (e.g., <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">-</span></code>, <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">/</span></code>).</p>
<ul>
<li><p>Implementing these in a performant manner may require us to use specialized
math libraries, which in turn makes this start to look like linear
algebra.</p></li>
</ul>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="statement_of_need.html" class="btn btn-neutral float-left" title="Why do we need WTF?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="type_erasure.html" class="btn btn-neutral float-right" title="Type-Erasure in WTF" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, NWChemEx Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>